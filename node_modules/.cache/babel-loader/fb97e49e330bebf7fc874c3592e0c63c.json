{"remainingRequest":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/thread-loader/dist/cjs.js!/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/babel-loader/lib/index.js!/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/src/components/Landing/MarketView/TradePane/TradeTab/MarketOrder/FOKFolder/FOKOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/src/components/Landing/MarketView/TradePane/TradeTab/MarketOrder/FOKFolder/FOKOrder.vue","mtime":1595618551683},{"path":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chrismoores/Projects/Vega/0x955C6789A7fbee203B4bE0F01428E769308813f2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\nimport VegaProtocolService from '@/services/VegaProtocolService';\nimport ExchangeDataEventBus from '@/eventBuses/exchangeData';\nimport { stringArrayToHtmlList } from '@/utils/utility';\nexport default {\n  name: 'FOK-Order',\n\n  data() {\n    return {\n      showConfirm: false,\n      formData: {\n        pair: 'BTC/USD',\n        type: 'limit',\n        exc: 'vegaProtocol',\n        vegaMarketName: this.$store.state.selectedVegaMarketNameTrade,\n        vegaMarketId: this.$store.state.selectedVegaMarketTradeId,\n        bos: 'Buy',\n        selectedmarketid: 'LBXRA65PN4FN5HBWRI2YBCOYDG2PBGYU',\n        amount: undefined,\n        //amount\n        price: undefined,\n        //price\n        moe: 'market'\n      },\n      AmountPlaceholder: this.$store.state.selectedVegaMarketbaseNameTrade,\n      showLoader: false,\n      statusCode: 'operational',\n      watcher: ''\n    };\n  },\n\n  // watch: {\n  //   formData: {\n  //     handler: function() {\n  //       this.getVegaStatus();   //getting status for exchange ()\n  //     },\n  //     deep: true,\n  //   },\n  // },\n  created() {\n    this.changeVegaMarket = newMarket => {\n      //Changing Selected Vega Market\n      this.formData.vegaMarketName = newMarket.Name;\n      this.formData.vegaMarketId = newMarket.Id; // console.log(this.formData.vegaMarketId + ' ' + this.formData.vegaMarketName);\n    };\n\n    ExchangeDataEventBus.$on('change-vega-market', this.changeVegaMarket);\n  },\n\n  computed: {\n    estimatedPriceSell() {\n      //Used \"width: (((Number(ask.totalVolume)/Number(maxVol))*308)) + '%',\" to determine width of dynamic bars\n      if (!this.formData.amount) {\n        return '';\n      } else {\n        return (Number(this.formData.amount) * Number(this.$store.state.liveTradePrice)).toFixed(5);\n      }\n    },\n\n    estimatedPriceBuy() {\n      if (!this.formData.amount) {\n        return '';\n      } else {\n        return (Number(this.formData.amount) * Number(this.$store.state.liveTradePrice)).toFixed(5);\n      }\n    }\n\n  },\n  methods: {\n    // pairChange() {\n    //   this.$store.commit('addLoaderTask', 3, false);\n    // ExchangeDataEventBus.$emit('change-symbol',this.$store.state.selectedPair);\n    // },\n    // getStatus() {\n    //   this.statusCode = this.$store.getters.getVegaExchangeStatus;\n    // },\n    confirmTrade(buyOrSell) {\n      //Called when we press Buy/Sell. Performs validation. If valid, Confirm/Cancel buttons displayed.\n      // console.log('Test1' + this.formData.amount);\n      this.formData.bos = buyOrSell;\n      let validationErrors = [];\n      this.validateQty(validationErrors, 'Amount', this.formData.amount);\n\n      if (validationErrors.length) {\n        this.$showErrorMsg({\n          message: stringArrayToHtmlList(validationErrors)\n        });\n      } else {\n        this.showConfirm = true;\n      }\n    },\n\n    validateQty(errorsArray, placeholder, value) {\n      //Checks if the values entered are valid\n      if (!value || Number(value) === 0) {\n        errorsArray.push(`${placeholder} is required.`);\n      } else if (value && Number.isNaN(Number(value)) || Number(value) < 0) {\n        errorsArray.push(`${placeholder} is not valid.`);\n      }\n    },\n\n    cancelTrade() {\n      //When we press Cancel button\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n    },\n\n    async makeTrade() {\n      //When we press make Trade. Shows Loader\n      // console.log('FOK Test2 ' + this.formData.amount);\n      this.showLoader = true;\n      let t1 = this.$store.getters.selectedVegaMarketNameTrade;\n      let t2 = this.$store.getters.selectedVegaMarketTradeId; // console.log( 'In Store ' + t1 + ' ' + t2); //checking market\n      // console.log( 'In OrderPanel ' + this.formData.vegaMarketName+ ' ' + this.formData.vegaMarketId); //checking market\n      //Make Call\n\n      const response = await VegaProtocolService.submitOrder_market(this.formData.vegaMarketId, this.formData.amount, this.formData.bos, 'MARKET', 'FOK');\n      setTimeout(() => {\n        if (!response) {\n          //TimeOut Limit\n          this.formData.amount = undefined;\n          this.formData.price = undefined;\n          this.showConfirm = false;\n          this.$showErrorMsg({\n            message: 'Timeout exceeded.'\n          });\n        }\n      }, 15000);\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n\n      if (response.status == 200) {\n        //If Successful\n        this.$showSuccessMsg({\n          message: this.formData.vegaMarketName + ' - ' + response.message\n        });\n      } else {\n        //If failed.\n        this.$showErrorMsg({\n          message: response.message\n        });\n      }\n\n      this.showLoader = false;\n    }\n\n  },\n\n  destroyed() {\n    clearInterval(this.watcher);\n    ExchangeDataEventBus.$off('change-vega-market', this.changeVegaMarket);\n  }\n\n};",{"version":3,"sources":["FOKOrder.vue"],"names":[],"mappings":"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","sourcesContent":["<template src=\"./template.html\"></template>\n\n<script>\nimport VegaProtocolService from '@/services/VegaProtocolService';\nimport ExchangeDataEventBus from '@/eventBuses/exchangeData';\nimport { stringArrayToHtmlList, } from '@/utils/utility';\n\nexport default {\n  name: 'FOK-Order',\n\n  data() {\n    return {\n      showConfirm: false,\n      formData: {\n        pair: 'BTC/USD',\n        type: 'limit',\n        exc: 'vegaProtocol',\n        vegaMarketName: this.$store.state.selectedVegaMarketNameTrade,\n        vegaMarketId: this.$store.state.selectedVegaMarketTradeId,\n        bos: 'Buy',\n        selectedmarketid: 'LBXRA65PN4FN5HBWRI2YBCOYDG2PBGYU',\n        amount: undefined,        //amount\n        price: undefined,         //price\n        moe: 'market',\n      },\n      AmountPlaceholder: this.$store.state.selectedVegaMarketbaseNameTrade,      \n      showLoader: false,\n      statusCode: 'operational',\n      watcher: '',\n    };\n  },\n\n  // watch: {\n  //   formData: {\n  //     handler: function() {\n  //       this.getVegaStatus();   //getting status for exchange ()\n  //     },\n  //     deep: true,\n  //   },\n  // },\n\n  created() {\n    this.changeVegaMarket = (newMarket) => {       //Changing Selected Vega Market\n      this.formData.vegaMarketName = newMarket.Name;\n      this.formData.vegaMarketId = newMarket.Id;\n      // console.log(this.formData.vegaMarketId + ' ' + this.formData.vegaMarketName);\n    };\n    ExchangeDataEventBus.$on('change-vega-market', this.changeVegaMarket);        \n  },\n\n  computed: {\n\n    estimatedPriceSell() {    //Used \"width: (((Number(ask.totalVolume)/Number(maxVol))*308)) + '%',\" to determine width of dynamic bars\n      if (!this.formData.amount) {\n        return '';\n      }\n      else {      \n        return ((Number(this.formData.amount))*Number(this.$store.state.liveTradePrice)).toFixed(5);\n      }\n    },\n    estimatedPriceBuy() {   \n      if (!this.formData.amount) {\n        return '';\n      }\n      else {      \n        return ((Number(this.formData.amount))*Number(this.$store.state.liveTradePrice)).toFixed(5);\n      }\n    },\n  },\n\n  methods: {\n    // pairChange() {\n    //   this.$store.commit('addLoaderTask', 3, false);\n    // ExchangeDataEventBus.$emit('change-symbol',this.$store.state.selectedPair);\n    // },\n\n    // getStatus() {\n    //   this.statusCode = this.$store.getters.getVegaExchangeStatus;\n    // },\n    \n    confirmTrade(buyOrSell) {   //Called when we press Buy/Sell. Performs validation. If valid, Confirm/Cancel buttons displayed.\n      // console.log('Test1' + this.formData.amount);\n      this.formData.bos = buyOrSell;\n      let validationErrors = [];\n      this.validateQty(validationErrors, 'Amount', this.formData.amount);\n      if (validationErrors.length) {this.$showErrorMsg({message: stringArrayToHtmlList(validationErrors),});\n      } \n      else {this.showConfirm = true;}\n    },\n    \n    validateQty(errorsArray, placeholder, value) {    //Checks if the values entered are valid\n      if (!value || Number(value) === 0) {errorsArray.push(`${placeholder} is required.`);\n      } \n      else if ((value && Number.isNaN(Number(value))) || Number(value) < 0) {\n        errorsArray.push(`${placeholder} is not valid.`);\n      }\n    },\n\n    cancelTrade() {       //When we press Cancel button\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n    },\n\n    async makeTrade() {   //When we press make Trade. Shows Loader\n      // console.log('FOK Test2 ' + this.formData.amount);\n      this.showLoader = true;\n      let t1 = this.$store.getters.selectedVegaMarketNameTrade;\n      let t2 = this.$store.getters.selectedVegaMarketTradeId;\n      // console.log( 'In Store ' + t1 + ' ' + t2); //checking market\n      // console.log( 'In OrderPanel ' + this.formData.vegaMarketName+ ' ' + this.formData.vegaMarketId); //checking market\n      //Make Call\n      const response = await  VegaProtocolService.submitOrder_market(this.formData.vegaMarketId,this.formData.amount,this.formData.bos,'MARKET','FOK');\n      setTimeout(() => {\n        if(!response) {   //TimeOut Limit\n          this.formData.amount = undefined;\n          this.formData.price = undefined;\n          this.showConfirm = false;\n          this.$showErrorMsg({message: 'Timeout exceeded.',});\n        }\n      },15000);\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n\n      if (response.status == 200) {     //If Successful\n        this.$showSuccessMsg({message: this.formData.vegaMarketName + ' - ' + response.message,});\n      } \n      else {                          //If failed.\n        this.$showErrorMsg({message: response.message,});\n      }\n      this.showLoader = false;\n    },\n  },\n\n  destroyed() {\n    clearInterval(this.watcher);\n    ExchangeDataEventBus.$off('change-vega-market', this.changeVegaMarket);    \n  },\n};\n</script>\n\n<style lang=\"scss\" src=\"./style.scss\" scoped></style>\n"],"sourceRoot":"src/components/Landing/MarketView/TradePane/TradeTab/MarketOrder/FOKFolder"}]}