{"remainingRequest":"/Users/chrismoores/Downloads/cryptowhaler/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chrismoores/Downloads/cryptowhaler/src/components/Landing/MarketView/TradePane/TradeTab/LimitOrder/IOCOrder/IOCLimitOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chrismoores/Downloads/cryptowhaler/src/components/Landing/MarketView/TradePane/TradeTab/LimitOrder/IOCOrder/IOCLimitOrder.vue","mtime":1595121760000},{"path":"/Users/chrismoores/Downloads/cryptowhaler/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chrismoores/Downloads/cryptowhaler/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chrismoores/Downloads/cryptowhaler/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chrismoores/Downloads/cryptowhaler/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n\nimport VegaProtocolService from '@/services/VegaProtocolService';\nimport ExchangeDataEventBus from '@/eventBuses/exchangeData';\nimport { stringArrayToHtmlList, } from '@/utils/utility';\n\nexport default {\n  name: 'IOC-Limit-Order',\n  data() {\n    return {\n      showConfirm: false,\n      formData: {\n        pair: 'BTC/USD',\n        type: 'limit',\n        exc: 'vegaProtocol',\n        vegaMarketName: this.$store.state.selectedVegaMarketName,\n        vegaMarketId: this.$store.state.selectedVegaMarketId,\n        bos: 'Buy',\n        selectedmarketid: 'LBXRA65PN4FN5HBWRI2YBCOYDG2PBGYU',\n        amount: undefined,        //amount\n        price: undefined,         //price\n        moe: 'market',\n      },\n      showLoader: false,\n      statusCode: 'operational',\n      watcher: '',\n    };\n  },\n\n  // watch: {\n  //   formData: {\n  //     handler: function() {\n  //       this.getStatus();   //getting status for exchange ()\n  //     },\n  //     deep: true,\n  //   },\n  // },\n\n\n  \n  created() {\n    this.changeVegaMarket = (newMarket) => {       //Changing Selected Vega Market\n      this.formData.vegaMarketName = newMarket.Name;\n      this.formData.vegaMarketId = newMarket.Id;\n      // console.log(this.formData.vegaMarketId + ' ' + this.formData.vegaMarketName);\n    };\n    ExchangeDataEventBus.$on('change-vega-market', this.changeVegaMarket);        \n  },\n\n  // mounted() {\n  //   this.watcher = setInterval(() => {this.getStatus();}, 5000);  //getting status for exchange () every 5 sec\n  //   // ExchangeDataEventBus.$on('change-symbol', this.changeSymbol);\n  //   // this.getStatus('auto');\n  // },\n\n  methods: {\n    // pairChange() {\n    //   this.$store.commit('addLoaderTask', 3, false);\n    //   // // console.log(this.$store.getters.getSelectedPairExchanges, \"lovish\");\n    //   // this.$store.commit('setAvailableExchanges');\n    //   ExchangeDataEventBus.$emit('change-symbol',this.$store.state.selectedPair);\n    // },\n    // changeSymbol() {\n    //   this.formData.exc = 'auto';\n    // },\n    // getStatus() {\n    //   // if (exc === 'auto') {\n    //   //   this.statusCode = this.$store.getters.getAutoStatus;\n    //   // } else {\n    //   this.statusCode = this.$store.getters.getVegaExchangeStatus;\n    //   // }\n    // },\n    // async getFees() {\n    //   this.fees.maker = fees.data.maker;\n    //   this.fees.taker = fees.data.taker;\n    // },\n    confirmTrade(buyOrSell) {   //Called when we press Buy/Sell. Performs validation. If valid, Confirm/Cancel buttons displayed.\n      this.formData.bos = buyOrSell;\n      let validationErrors = [];\n      this.validateQty(validationErrors, 'Amount', this.formData.amount);\n      this.validateQty(validationErrors, 'Price', this.formData.price);\n      if (validationErrors.length) {this.$showErrorMsg({message: stringArrayToHtmlList(validationErrors),});\n      } \n      else {this.showConfirm = true;}\n    },\n\n    validateQty(errorsArray, placeholder, value) {    //Checks if the values entered are valid\n      if (!value || Number(value) === 0) {errorsArray.push(`${placeholder} is required.`);\n      } \n      else if ((value && Number.isNaN(Number(value))) || Number(value) < 0) {\n        errorsArray.push(`${placeholder} is not valid.`);\n      }\n    },\n\n    cancelTrade() {       //When we press Cancel button\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n    },\n\n    async makeTrade() {   //When we press make Trade. Shows Loader\n      // console.log('FOK Test2 ' + this.formData.amount);\n      this.showLoader = true;\n      let t1 = this.$store.getters.selectedVegaMarketName;\n      let t2 = this.$store.getters.selectedVegaMarketId;\n      // console.log( 'In Store ' + t1 + ' ' + t2); //checking market\n      // console.log( 'In OrderPanel ' + this.formData.vegaMarketName+ ' ' + this.formData.vegaMarketId); //checking market\n      //      this.formData.pair = this.$store.getters.selectedmarketid;    // Selected market ID\n      //Make Call\n      const response = await  VegaProtocolService.submitOrder_limit(this.formData.vegaMarketId,this.formData.amount,this.formData.bos,'LIMIT','IOC',parseInt(this.formData.price*100000), this.$store.state.selectedVegaMarketquoteName);\n      setTimeout(() => {\n        if(!response) {   //TimeOut Limit\n          this.formData.amount = undefined;\n          this.formData.price = undefined;\n          this.showConfirm = false;\n          this.showLoader = false;\n          this.$showErrorMsg({message: 'Timeout exceeded.',});\n        }\n      },15000);\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n\n      if (response.status == 200) {     //If Successful\n        this.$showSuccessMsg({message: this.formData.vegaMarketName + ' - ' + response.message,});\n      } \n      else {                          //If failed.\n        this.$showErrorMsg({message: response.message,});\n      }\n      this.showLoader = false;\n    },\n  },\n\n  destroyed() {\n    clearInterval(this.watcher);\n    ExchangeDataEventBus.$off('change-vega-market', this.changeVegaMarket);    \n  },\n};\n",{"version":3,"sources":["IOCLimitOrder.vue"],"names":[],"mappings":";;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"IOCLimitOrder.vue","sourceRoot":"src/components/Landing/MarketView/TradePane/TradeTab/LimitOrder/IOCOrder","sourcesContent":["<template src=\"./template.html\"></template>\n\n<script>\nimport VegaProtocolService from '@/services/VegaProtocolService';\nimport ExchangeDataEventBus from '@/eventBuses/exchangeData';\nimport { stringArrayToHtmlList, } from '@/utils/utility';\n\nexport default {\n  name: 'IOC-Limit-Order',\n  data() {\n    return {\n      showConfirm: false,\n      formData: {\n        pair: 'BTC/USD',\n        type: 'limit',\n        exc: 'vegaProtocol',\n        vegaMarketName: this.$store.state.selectedVegaMarketName,\n        vegaMarketId: this.$store.state.selectedVegaMarketId,\n        bos: 'Buy',\n        selectedmarketid: 'LBXRA65PN4FN5HBWRI2YBCOYDG2PBGYU',\n        amount: undefined,        //amount\n        price: undefined,         //price\n        moe: 'market',\n      },\n      showLoader: false,\n      statusCode: 'operational',\n      watcher: '',\n    };\n  },\n\n  // watch: {\n  //   formData: {\n  //     handler: function() {\n  //       this.getStatus();   //getting status for exchange ()\n  //     },\n  //     deep: true,\n  //   },\n  // },\n\n\n  \n  created() {\n    this.changeVegaMarket = (newMarket) => {       //Changing Selected Vega Market\n      this.formData.vegaMarketName = newMarket.Name;\n      this.formData.vegaMarketId = newMarket.Id;\n      // console.log(this.formData.vegaMarketId + ' ' + this.formData.vegaMarketName);\n    };\n    ExchangeDataEventBus.$on('change-vega-market', this.changeVegaMarket);        \n  },\n\n  // mounted() {\n  //   this.watcher = setInterval(() => {this.getStatus();}, 5000);  //getting status for exchange () every 5 sec\n  //   // ExchangeDataEventBus.$on('change-symbol', this.changeSymbol);\n  //   // this.getStatus('auto');\n  // },\n\n  methods: {\n    // pairChange() {\n    //   this.$store.commit('addLoaderTask', 3, false);\n    //   // // console.log(this.$store.getters.getSelectedPairExchanges, \"lovish\");\n    //   // this.$store.commit('setAvailableExchanges');\n    //   ExchangeDataEventBus.$emit('change-symbol',this.$store.state.selectedPair);\n    // },\n    // changeSymbol() {\n    //   this.formData.exc = 'auto';\n    // },\n    // getStatus() {\n    //   // if (exc === 'auto') {\n    //   //   this.statusCode = this.$store.getters.getAutoStatus;\n    //   // } else {\n    //   this.statusCode = this.$store.getters.getVegaExchangeStatus;\n    //   // }\n    // },\n    // async getFees() {\n    //   this.fees.maker = fees.data.maker;\n    //   this.fees.taker = fees.data.taker;\n    // },\n    confirmTrade(buyOrSell) {   //Called when we press Buy/Sell. Performs validation. If valid, Confirm/Cancel buttons displayed.\n      this.formData.bos = buyOrSell;\n      let validationErrors = [];\n      this.validateQty(validationErrors, 'Amount', this.formData.amount);\n      this.validateQty(validationErrors, 'Price', this.formData.price);\n      if (validationErrors.length) {this.$showErrorMsg({message: stringArrayToHtmlList(validationErrors),});\n      } \n      else {this.showConfirm = true;}\n    },\n\n    validateQty(errorsArray, placeholder, value) {    //Checks if the values entered are valid\n      if (!value || Number(value) === 0) {errorsArray.push(`${placeholder} is required.`);\n      } \n      else if ((value && Number.isNaN(Number(value))) || Number(value) < 0) {\n        errorsArray.push(`${placeholder} is not valid.`);\n      }\n    },\n\n    cancelTrade() {       //When we press Cancel button\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n    },\n\n    async makeTrade() {   //When we press make Trade. Shows Loader\n      // console.log('FOK Test2 ' + this.formData.amount);\n      this.showLoader = true;\n      let t1 = this.$store.getters.selectedVegaMarketName;\n      let t2 = this.$store.getters.selectedVegaMarketId;\n      // console.log( 'In Store ' + t1 + ' ' + t2); //checking market\n      // console.log( 'In OrderPanel ' + this.formData.vegaMarketName+ ' ' + this.formData.vegaMarketId); //checking market\n      //      this.formData.pair = this.$store.getters.selectedmarketid;    // Selected market ID\n      //Make Call\n      const response = await  VegaProtocolService.submitOrder_limit(this.formData.vegaMarketId,this.formData.amount,this.formData.bos,'LIMIT','IOC',parseInt(this.formData.price*100000), this.$store.state.selectedVegaMarketquoteName);\n      setTimeout(() => {\n        if(!response) {   //TimeOut Limit\n          this.formData.amount = undefined;\n          this.formData.price = undefined;\n          this.showConfirm = false;\n          this.showLoader = false;\n          this.$showErrorMsg({message: 'Timeout exceeded.',});\n        }\n      },15000);\n      this.formData.amount = undefined;\n      this.formData.price = undefined;\n      this.showConfirm = false;\n\n      if (response.status == 200) {     //If Successful\n        this.$showSuccessMsg({message: this.formData.vegaMarketName + ' - ' + response.message,});\n      } \n      else {                          //If failed.\n        this.$showErrorMsg({message: response.message,});\n      }\n      this.showLoader = false;\n    },\n  },\n\n  destroyed() {\n    clearInterval(this.watcher);\n    ExchangeDataEventBus.$off('change-vega-market', this.changeVegaMarket);    \n  },\n};\n</script>\n\n<style lang=\"scss\" src=\"./style.scss\" scoped></style>\n\n"]}]}